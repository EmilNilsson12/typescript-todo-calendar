(this["webpackJsonptypescript-todo-calendar"]=this["webpackJsonptypescript-todo-calendar"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){},,function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o=n(1),c=n.n(o),a=n(12),r=n.n(a),i=(n(17),n(4)),d=n(3),l=(n(18),n(10)),s=n(2),u=n.n(s);function j(t,e){var n,o=u()(t.deadline),c=u()(e.deadline);return n=o.isBefore(c)?-1:c.isBefore(o)?1:0,console.log("returnValue: ",n),n}n(20);var b=n(8),f=n(0);var O=function(t){var e=Object(o.useState)(!1),n=Object(d.a)(e,2),c=n[0],a=n[1],r=t.todoObj,i=t.toggleCompleteTodo,l=(t.beginEdit,t.deleteTodo);return Object(f.jsxs)("div",{className:"\n\t\t\ttodo-view\n\t\t\t".concat(r.completed?"todo-completed":"","\n\t\t"),children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h4",{children:r.title}),r.description?Object(f.jsx)("p",{children:r.description}):Object(f.jsx)(f.Fragment,{})]}),Object(f.jsx)("div",{className:"todo-btns",children:c?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){a(!1)},children:"Cancel delete"}),Object(f.jsx)("button",{onClick:function(){l(r.id),a(!1)},children:"Confirm delete"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){a(!0)},children:Object(f.jsx)(b.c,{})}),Object(f.jsx)("button",{onClick:function(){i(r)},children:r.completed?Object(f.jsx)(b.b,{}):Object(f.jsx)(b.a,{})})]})})]})};var m=function(t){var e,n,o=t.todos,c=t.allTodos,a=t.updateMomentObjCallback,r=t.toggleCompleteTodo,i=t.beginEdit,d=t.deleteTodo;return Object(f.jsxs)("div",{className:"DailyTodos",children:[c?Object(f.jsxs)(f.Fragment,{children:[" ","Jump to ","--\x3e",Object(f.jsx)("button",{onClick:function(t){var e=u()().toISOString().split("T")[1],n=u()(t.target.innerText+"T"+e);a(n)},children:null===(e=o[0])||void 0===e||null===(n=e.deadline)||void 0===n?void 0:n.split("T")[0]})]}):Object(f.jsx)(f.Fragment,{}),o.map((function(t){return Object(f.jsx)(O,{todoObj:t,toggleCompleteTodo:r,beginEdit:i,deleteTodo:d},t.id)}))]})},p=function(t){var e,n=t.todos,o=t.updateMomentObjCallback,c=t.toggleCompleteTodo,a=t.beginEdit,r=t.deleteTodo,d=Object(i.a)(n.sort(j)),s=new Set,u=Object(l.a)(d);try{for(u.s();!(e=u.n()).done;){var b=e.value;s.add(b.deadline.split("T")[0])}}catch(x){u.e(x)}finally{u.f()}for(var O=Array.from(s),p=[],g=function(){var t=v[h];p.push(d.filter((function(e){return e.deadline.split("T")[0]===t})))},h=0,v=O;h<v.length;h++)g();return Object(f.jsxs)("div",{className:"AllTodos",children:[Object(f.jsx)("h2",{children:"All todos"}),function(){var t,e=[],n=Object(l.a)(p);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(Object(f.jsx)(m,{updateMomentObjCallback:o,allTodos:!0,todos:i,toggleCompleteTodo:c,beginEdit:a,deleteTodo:r},i[0].deadline))}}catch(x){n.e(x)}finally{n.f()}return e.length?e:Object(f.jsx)("div",{className:"AllTodos",children:"No todos yet..."})}()]})};n(22);var g=function(t){var e=t.todos,n=t.currentDayInFocus,o=t.updateMomentObjCallback,c=t.toggleCompleteTodo,a=t.beginEdit,r=t.deleteTodo,d=Object(i.a)(e.sort(j));return Object(f.jsxs)("div",{className:"DailyTodos",children:[Object(f.jsxs)("h2",{children:["Todos due:"," ",Object(f.jsx)("span",{className:"current-day-in-focus-header",children:n.format("YYYY-MM-DD")})]}),Object(f.jsx)(m,{todos:d,updateMomentObjCallback:o,allTodos:!1,toggleCompleteTodo:c,beginEdit:a,deleteTodo:r})]})},h=n(28);n(23);var v=function(t){var e=t.initialDeadline,n=Object(o.useState)(""),c=Object(d.a)(n,2),a=c[0],r=c[1],i=Object(o.useState)(""),l=Object(d.a)(i,2),s=l[0],j=l[1],b=Object(o.useState)(e),O=Object(d.a)(b,2),m=O[0],p=O[1],g=Object(o.useState)(e.clone().toISOString().split("T")[0]),v=Object(d.a)(g,2),x=v[0],T=v[1];return Object(o.useEffect)((function(){p(e),T(e.clone().toISOString().split("T")[0])}),[e]),Object(f.jsx)("div",{className:"TodoFormContainer",children:Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=u()().toISOString().split("T")[1];t.addTodo({title:a,description:s,deadline:m.toISOString().split("T")[0].concat("T",n),completed:!1,id:Object(h.a)()}),r(""),j(""),p(u()()),T(m.clone().toISOString().split("T")[0])},className:"TodoForm",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Title"}),Object(f.jsx)("input",{type:"text",value:a,onChange:function(t){var e=t.target;r(e.value)},required:!0,autoFocus:!0})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Additional info"}),Object(f.jsx)("textarea",{value:s,onChange:function(t){var e=t.target;j(e.value)}})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Deadline: "}),Object(f.jsx)("input",{type:"date",value:x,onChange:function(t){var e=t.target.value,n=e+"T"+u()(m).toISOString().split("T")[1],o=u()(n);p(o),T(e)},required:!0})]}),Object(f.jsx)("div",{className:"submit-btn-div",children:Object(f.jsx)("button",{type:"submit",children:"Add new Todo"})})]})})},x=n(7),T=n.n(x),S=n(11);n(25);var y=function(t){var e=t.day,n=t.placeHolder,o=t.today,c=t.active,a=t.cbFunc,r=t.numOfTodos,i=t.dayValues;return Object(f.jsx)(f.Fragment,{children:n?Object(f.jsx)("div",{className:"placeholder grid-child"}):Object(f.jsxs)("button",{id:e+"|day of this month",className:"\n\t\t\t\t\t\tday-div\n\t\t\t\t\t\tgrid-child\n\t\t\t\t\t\t".concat(c?"active-day":"","\n\t\t\t\t\t\t").concat(r[0]>0?"has-todos":"","\n\t\t\t\t\t\t").concat(r[0]>0&&0===r[1]?"all-todos-done":"","\n\t\t\t\t\t\t").concat(o?"today":"","\n\t\t\t\t\t\t").concat(Y(i)?"is-holiday":"","\n\t\t\t\t\t\t").concat(C(i)?"is-flag-day":"","\n\t\t\t\t\t"),onClick:a,children:[r?Object(f.jsx)("div",{className:"notch-container",children:function(){var t;return r[0]>0&&(t=r[1]>0?"".concat(r[1]," todo").concat(r[1]>1?"s":""," due!"):"All todos done!"),t}()}):Object(f.jsx)(f.Fragment,{children:" "}),Object(f.jsx)("div",{className:"date-num",children:e})]})})};function Y(t){return!!t&&("Ja"===t["r\xf6d dag"]||"Ja"===t["arbetsfri dag"])}function C(t){return!!t&&""!==t.flaggdag}var I=function(){return Object(f.jsx)("div",{className:"grid-container week-days",children:function(){for(var t=[],e=0;e<7;e++){var n=u()();n.set("day",e),t.push(Object(f.jsx)("div",{className:"week-day-label",children:n.format("dddd")},n.format("dddd")))}return t}()})};var N=function(t){var e=t.todos,n=t.callBack,c=t.momentObj,a=Object(o.useState)(u()()),r=Object(d.a)(a,2),i=r[0],l=(r[1],Object(o.useState)(i.toString().split(" ")[4])),s=Object(d.a)(l,2),j=s[0],b=s[1],O=Object(o.useState)(c.clone().format("YYYY")),m=Object(d.a)(O,2),p=m[0],g=m[1],h=Object(o.useState)(!0),v=Object(d.a)(h,2),x=(v[0],v[1]);Object(o.useEffect)((function(){function t(){return t=Object(S.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p!==c.clone().format("YYYY")&&g(c.clone().format("YYYY")),localStorage.getItem("year-".concat(p))){t.next=7;break}return localStorage.setItem("year-".concat(p),p),t.next=5,fetch("https://sholiday.faboul.se/dagar/v2.1/".concat(p)).then((function(t){return t.json()})).then(function(){var t=Object(S.a)(T.a.mark((function t(e){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,localStorage.setItem("year-".concat(p,"-holidays"),JSON.stringify(e.dagar));case 2:x(!1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:t.next=8;break;case 7:x(!1);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[p,c]),Object(o.useEffect)((function(){b(c.toString().split(" ")[4])}),[c]);var Y=function(t){var e,o=t.target;e="|"===o.textContent?parseInt(o.parentNode.parentNode.id.split("|")[0]):""===o.id?parseInt(o.parentNode.id.split("|")[0]):parseInt(o.id.split("|")[0]);var a=c.clone().date(e).toISOString().split("T")[0],r=u()(a+"T"+j);n(r)};return Object(f.jsx)("div",{className:"calendar",children:Object(f.jsxs)("div",{className:"month-view",children:[Object(f.jsxs)("div",{className:"month-navigator",children:[Object(f.jsx)("button",{onClick:function(){var t=c.clone().subtract(1,"M").toISOString().split("T")[0],e=u()(t+"T"+j);n(e)},children:"Prev month"}),Object(f.jsx)("h2",{className:"current-month",children:Object(f.jsxs)("i",{children:[c.format("MMMM")," - ",c.format("YYYY")]})}),Object(f.jsx)("button",{onClick:function(){var t=c.clone().add(1,"M").toISOString().split("T")[0],e=u()(t+"T"+j);n(e)},children:"Next month"})]}),Object(f.jsx)(I,{}),Object(f.jsx)("div",{className:"grid-container calender-days",children:function(){for(var t=[],n=c.clone().startOf("month").format("e"),o=1;o<=n;o++)t.push(Object(f.jsx)(y,{placeHolder:!0},"null ".concat(o," of month")));for(var a=1;a<=c.daysInMonth();a++)t.push(Object(f.jsx)(y,{placeHolder:!1,day:a,today:D(i,c,a),active:k(c,a),cbFunc:Y,numOfTodos:M(c,e,a),dayValues:E(c,a)},"Day ".concat(a," of month")));return t}()})]})})};function M(t,e,n){var o=t.clone().set("date",n).format("YYYY-MM-DD"),c=e.filter((function(t){return t.deadline.split("T")[0]===o})),a=c.filter((function(t){return!t.completed}));return[c.length,a.length]}function k(t,e){return parseInt(t.clone().format("D"),10)===e}function D(t,e,n){var o=parseInt(t.clone().format("D"),10),c=parseInt(t.clone().format("MM"),10),a=parseInt(t.clone().format("YYYY"),10),r=parseInt(e.clone().format("MM"),10),i=parseInt(e.clone().format("YYYY"),10);return o===n&&c===r&&a===i}function E(t,e){var n,o,c,a;return e>0?(n=t.clone().format("YYYY").toString(),o=t.clone().format("MM").toString(),c=t.clone().set("date",e).format("DD").toString()):(n=t.clone().format("YYYY").toString(),o=t.clone().format("MM").toString(),c=t.clone().format("DD").toString()),localStorage.getItem("year-".concat(n,"-holidays"))&&(a=JSON.parse(localStorage.getItem("year-".concat(n,"-holidays"))).find((function(t){return t.datum==="".concat(n,"-").concat(o,"-").concat(c)}))),a}var F=function(){var t=Object(o.useState)([{title:"Intervju med Emil",description:"",deadline:"2021-10-06T09:26:23.673Z",completed:!0,id:"e1a17603-bda9-434f-974a-36ebc9b9b924"},{title:"Kolla Emils Github",description:"",deadline:"2021-10-07T09:26:11.289Z",completed:!1,id:"c42914d7-77c4-45b3-88ef-f4a196a1c95a"},{title:"Ta helg!",description:"",deadline:"2021-10-09T09:27:23.570Z",completed:!1,id:"61fe12a4-c115-4407-8e05-0bcb2199f40f"}]),e=Object(d.a)(t,2),n=e[0],c=e[1],a=Object(o.useState)((function(){return u()()})),r=Object(d.a)(a,2),l=r[0],s=r[1],j=function(t){s(t)};Object(o.useEffect)((function(){if(localStorage.getItem("todos")){var t=localStorage.getItem("todos"),e=JSON.parse(t||"[]");c(e)}else localStorage.setItem("todos",JSON.stringify(n))}),[]),Object(o.useEffect)((function(){localStorage.setItem("todos",JSON.stringify(n))}),[n]);var b={addTodo:function(t){w(Object(i.a)(n),c,t)},deleteTodo:function(t){w(Object(i.a)(n).filter((function(e){return e.id!==t})),c,{skipMe:!0})},toggleCompleteTodo:function(t){var e=t.id,o=n.find((function(t){return t.id===e}));o&&(o.completed=!o.completed),w(Object(i.a)(n).filter((function(t){return t.id!==e})),c,o)},updateTodo:function(t){w(Object(i.a)(n).filter((function(e){return e.id!==t.id})),c,t)}};return Object(f.jsxs)("div",{className:"App container",children:[Object(f.jsx)(p,{todos:n,updateMomentObjCallback:j,toggleCompleteTodo:b.toggleCompleteTodo,beginEdit:b.updateTodo,deleteTodo:b.deleteTodo}),Object(f.jsx)(N,{todos:n,callBack:j,momentObj:l}),Object(f.jsx)(v,{initialDeadline:l,addTodo:function(t){console.log("Button clicked");var e=[].concat(Object(i.a)(n),[t]);console.log("copyOfTodos: ",e),c(e),localStorage.setItem("todos",JSON.stringify(n))}}),Object(f.jsx)(g,{todos:n.filter((function(t){return t.deadline.split("T")[0]===l.format("YYYY-MM-DD")})),updateMomentObjCallback:j,currentDayInFocus:l,toggleCompleteTodo:b.toggleCompleteTodo,beginEdit:b.updateTodo,deleteTodo:b.deleteTodo})]})};function w(t,e,n){n.skipMe||t.push(n),e(t)}r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(F,{})}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.76335405.chunk.js.map